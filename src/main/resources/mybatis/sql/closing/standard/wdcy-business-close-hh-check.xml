<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kyowon.sms.wells.web.closing.standard.mapper.WdcyBusinessCloseHhCheckMapper">
    <!--
    테이블 생성 전 테이블 정리되면 쿼리문 살리고 다시 테스트 진행 해야 함
    <select id="selectBusinessCloseHh" resultType="com.kyowon.sms.edu.web.closing.standard.dvo.EdcyBusinessCloseHhCheckDvo">
        SELECT ST_DT, STRT_HH, ED_DT, END_HH, PERF_DT
          FROM TB_CBCL_BZNS_CL_HH
         WHERE BLG_CRP_CD = '1200'
           AND CL_DT = #{clDt} /*일자*/
           AND CL_PSIC_NO = #{clPsicNo} /*담당자번호*/
           AND CL_BIZ_TP_CD = #{clBizTpCd} /*마감업무유형코드*/
    </select>-->

    <select id="selectBusinessCloseHh" resultType="com.kyowon.sms.wells.web.closing.standard.dvo.WdcyBusinessCloseHhCheckDvo">
        SELECT '20230201' AS ST_DT, '09' AS STRT_HH, '20230206' AS ED_DT, '18' AS END_HH, '20230206' AS PERF_DT
          FROM DUAL
         WHERE 1=1
    </select>
    
    <select id="selectCloseHourConfirm" resultType="com.kyowon.sms.wells.web.closing.standard.dto.WdcyBusinessCloseHhCheckDto$SearchRes">
        SELECT CASE WHEN TO_CHAR(CURRENT_TIMESTAMP, 'yyyyMMddHH24') BETWEEN #{stDt}||#{strtHh} AND #{edDt}||#{endHh}
                    THEN 'Y'
                    ELSE 'N'
                END PROCS_PSB_YN
             , CASE WHEN TO_CHAR(CURRENT_TIMESTAMP, 'yyyyMMddHH24') BETWEEN #{stDt}||#{strtHh} AND #{edDt}||#{endHh}
                    THEN #{perfDt}
                    ELSE '00010101'
                END PERF_DT
          FROM DUAL
    </select>

</mapper>
