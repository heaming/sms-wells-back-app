<?xml version="1.0" encoding="UTF-8"?>
<!--
****************************************************************************************************
* 프로그램 개요
****************************************************************************************************
1. 모듈 : SNY (기준정보)
2. 프로그램 ID : W-SV-U-0016M01 AS 코드관리
3. 작성자 : gs.piit122
4. 작성일 : 2022.11.08
****************************************************************************************************
* 프로그램 설명
****************************************************************************************************
- AS코드관리 (http://localhost:3000/#/service/wwsny-after-service-code-mgt)
****************************************************************************************************
-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kyowon.sms.wells.web.service.common.mapper.WsnyApplianceInstallStandardMgtMapper">
    <select id="selectInstallStandards" resultType="com.kyowon.sms.wells.web.service.common.dto.WsnyApplianceInstallStandardMgtDto$SearchRes">
        SELECT #{dgr1ClsfCd} dgr1ClsfCd
             , #{dgr2ClsfCd} dgr2ClsfCd
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '1'
                   AND IST_BASE_LCLSF_CD = '11') baseCn11
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '1'
                   AND IST_BASE_LCLSF_CD = '12') baseCn12
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '1'
                   AND IST_BASE_LCLSF_CD = '13') baseCn13
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '2'
                   AND IST_BASE_LCLSF_CD = '21') baseCn21
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '2'
                   AND IST_BASE_LCLSF_CD = '22') baseCn22
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '2'
                   AND IST_BASE_LCLSF_CD = '23') baseCn23
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '2'
                   AND IST_BASE_LCLSF_CD = '24') baseCn24
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '2'
                   AND IST_BASE_LCLSF_CD = '25') baseCn25
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '3'
                   AND IST_BASE_LCLSF_CD = '31') baseCn31
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '4'
                   AND IST_BASE_LCLSF_CD = '41') baseCn41
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '4'
                   AND IST_BASE_LCLSF_CD = '42') baseCn42
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '4'
                   AND IST_BASE_LCLSF_CD = '43') baseCn43
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '4'
                   AND IST_BASE_LCLSF_CD = '44') baseCn44
             , (SELECT IST_BASE_CN
                  FROM TB_SVPD_IST_BASE_CLSF_IZ
                 WHERE 1=1
                   AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
                   AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
                   AND IST_BASE_HCLSF_CD = '5'
                   AND IST_BASE_LCLSF_CD = '51') baseCn51
          FROM DUAL
    </select>

    <update id="saveApplianceInstallStandard">
        DECLARE
        BEGIN

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn11}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '1'
           AND IST_BASE_LCLSF_CD = '11';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn12}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '1'
           AND IST_BASE_LCLSF_CD = '12';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn13}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '1'
           AND IST_BASE_LCLSF_CD = '13';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn21}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '2'
           AND IST_BASE_LCLSF_CD = '21';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn22}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '2'
           AND IST_BASE_LCLSF_CD = '22';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn23}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '2'
           AND IST_BASE_LCLSF_CD = '23';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn24}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '2'
           AND IST_BASE_LCLSF_CD = '24';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn25}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '2'
           AND IST_BASE_LCLSF_CD = '25';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn31}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '3'
           AND IST_BASE_LCLSF_CD = '31';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn41}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '4'
           AND IST_BASE_LCLSF_CD = '41';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn42}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '4'
           AND IST_BASE_LCLSF_CD = '42';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn43}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '4'
           AND IST_BASE_LCLSF_CD = '43';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn44}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '4'
           AND IST_BASE_LCLSF_CD = '44';

        UPDATE TB_SVPD_IST_BASE_CLSF_IZ
           SET IST_BASE_CN = #{baseCn51}
             , FNL_MDFC_DTM = TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS')
         WHERE 1=1
           AND IST_BASE_DGR1_CLSF_CD = #{dgr1ClsfCd}
           AND IST_BASE_DGR2_CLSF_CD = #{dgr2ClsfCd}
           AND IST_BASE_HCLSF_CD = '5'
           AND IST_BASE_LCLSF_CD = '51';

        END;
    </update>
</mapper>
