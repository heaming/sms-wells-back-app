<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kyowon.sms.wells.web.service.visit.mapper.WsnbServiceProcDetailListMapper">
    <!--서비스처리상세내역 Dvo-->
    <select id="selectServiceProcDetailList" resultType="com.kyowon.sms.wells.web.service.visit.dvo.WsnbServiceProcDetailListDvo">
        SELECT    'W20215424510' AS  CNTR_NO
                , '1' AS  CNTR_SN
                , '테스트' AS  RCGVP_KNM
                , 'W20215424510-1' AS  CNTR_DTL_NO
                , '010' AS  CRAL_LOCARA_TNO
                , 'SgBG9oaLr6l4CnWEAh1gBw==' AS  MEXNO_ENCR
                , '5232' AS  CRAL_IDV_TNO
                , '3202308160000866176' AS  CST_SV_ASN_NO
                , 'EGa+sVc0EXbv3Dg000SXPk4NN_00001' AS  ADR_ID
                , '인천 미추홀구 경인로 395' AS  RNADR
                , '3동 808호 (주안동,현대아파트)' AS  RDADR
                , 'WP02120618' AS  PD_CD
                , 'AP107그레이/택배배송 렌탈 일반렌탈' AS  PD_NM
                , 'AL4WAKD02Q70300051' AS  WK_BC_NO
                , 'AL4WAKD02Q70300051' AS  FL_BC_NO
                , '8' AS  CNSL_DTLP_TP_CD
                , '반품' AS  CNSL_DTLP_TP_NM
                , '10' AS  CNSL_MO_CN
                , '20230925' AS  VST_FSH_DT
                , '145718' AS  VST_FSH_HH
                , '372' AS  PRTNR_NO
                , '테스트' AS  PRTNR_KNM
                , '1' AS  AS_CAUS_CD
                , '22' AS  SV_PROCS_CN
                , (SELECT CST_SIGN_CN
                    FROM WSMDBS.TB_SVPD_CST_SV_WK_RS_IZ
                    WHERE
                    CST_SV_ASN_NO = '3202101010000000332') AS  CST_SIGN_CN_BYTE
                , '33' AS  BZRNO
                , '44' AS  RC101_BIZ_OK
                , '5' AS  AS_LCT_CD
                , '6' AS  AS_PHN_CD
                , '7' AS  IMPTA_RSON_CD
                , '8' AS  LNF_DV_CD
                , 'Y' AS  TONEP_IST_OPT_YN
                , '20230905' AS  TXINV_PBL_D
                , 'Y' AS  TXINV_PBL_YN
          FROM DUAL
    </select>
    <!--결제내역 Dvo-->
    <select id="selectServiceProcDetailStlmIz" resultType="com.kyowon.sms.wells.web.service.visit.dvo.WsnbServiceProcDetailStlmIzDvo">
        SELECT    STLM_DV_CD
                , DP_SUM_AMT
                , ISCMP_CD
                , CRCDNO_ENCR
                , ISTM_MCN
          FROM WSMDBS.TB_SVPD_SV_CS_DP_IZ
         WHERE    1=1
              AND CNTR_NO = #{cntrNo}
              AND CNTR_SN = #{cntrSn}
              AND CST_SV_ASN_NO = #{cstSvAsnNo}
              AND DTA_DL_YN = 'N'
    </select>
    <!--청구항목 Dvo-->
    <select id="selectServiceProcDetailBilItem" resultType="com.kyowon.sms.wells.web.service.visit.dvo.WsnbServiceProcDetailBilItemDvo">
        SELECT    CS_BIL_ATC_CD
                , BIL_OJ_AMT
                , BIL_CTR_SUM_AMT
                , (BIL_OJ_AMT - BIL_CTR_SUM_AMT) AS BIL_RVE_AMT
          FROM  WSMDBS.TB_SVPD_SV_CS_BIL_DTL
         WHERE    1=1
              AND CNTR_NO = #{cntrNo}
              AND CNTR_SN = #{cntrSn}
              AND CST_SV_ASN_NO = #{cstSvAsnNo}
              AND DTA_DL_YN = 'N'
    </select>
    <!--투입부품 Dvo-->
    <select id="selectServiceProcDetailPuPart" resultType="com.kyowon.sms.wells.web.service.visit.dvo.WsnbServiceProcDetailPuPartDvo">
        SELECT    P1.ITM_PD_CD AS  PD_CD
                , P2.PD_NM AS PD_NM
                , P1.FNL_BC_NO
                , P1.USE_QTY
          FROM  TB_SVST_SV_WK_OSTR_IZ P1
     INNER JOIN WSMDBS.TB_PDBS_PD_BAS P2
             ON P2.PD_CD =  P1.ITM_PD_CD
            AND P2.DTA_DL_YN = 'N'
         WHERE    1=1
              AND P1.CNTR_NO = #{cntrNo}
              AND P1.CNTR_SN = #{cntrSn}
              AND P1.CST_SV_ASN_NO = #{cstSvAsnNo}
              AND P1.DTA_DL_YN = 'N'
    </select>
</mapper>
